Muszę od zera zrobić aplikację dla firmy dla łatwego zarządzania tonerami i ich magazynowania.
Program polega na skanowaniu z telefonu kodu pasemkowego toneru oraz kodu pasemkowego komórki 
regału na którym toner musi leżeć, kod komórki wyznacza się w taki sposób: pierwszy regał R1, 
druga półka P2 trzecia sekcja półki C, wszystko razem: R1-P2-C, można skrócić do R12C. 
Narazie to nie musi być bardzo profesjonalna aplikacja, to sie zrobi później, 
potrzebuja działający prototyp programu, który przynajmniej będzie działał na telefonie, 
będzie mógł skanować kody i zarządzać bazą danych tonerów. Ja nie jestem profesjonalnym programistą, 
dobrze umiem w tworzeniu stron w html, css, js i php, zarządzanie baz danych w mysql oraz podstawowe OOP, 
tworzenie plików i zarządzanie wskaźnikawmi w C++. Zrób realistyczny plan stworzenia takiej aplikacji w kilka dni, 
postaraj się używać najprostszych narzędzi, jak php dla backendu, laragon dla bazy danych.

Potrzebuje zrobić działający frontend i odpalić aplikacje na emulatorze w android studio

Na razie mam taka baze danych z 1 tabela: 

CREATE TABLE IF NOT EXISTS toners ( 
    id INT AUTO_INCREMENT PRIMARY KEY, 
    barcode VARCHAR(255) NOT NULL, 
    model VARCHAR(255) NOT NULL, 
    location VARCHAR(255) NOT NULL, 
    quantity INT NOT NULL DEFAULT 1, 
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP 
);

Oraz taki backend zrobiony w php:

folder w laragon/www/toner_api

add_or_update.php

<?php
header("Content-Type: application/json");
header("Access-Control-Allow-Origin: *");

require_once "db.php"; // połączenie z PDO

$data_raw = file_get_contents("php://input");
$data = json_decode($data_raw, true);

if (!$data) {
    echo json_encode(["error" => "Brak danych JSON."]);
    exit;
}

$barcode = $data['barcode'] ?? '';
$model = $data['model'] ?? '';
$location = $data['location'] ?? '';
$quantity = isset($data['quantity']) ? intval($data['quantity']) : 1;

if (!$barcode || !$model || !$location) {
    echo json_encode(["error" => "Brakuje wymaganych pól (barcode/model/location)."]);
    exit;
}

// Normalizacja lokalizacji: R1-P2-C -> R12C
function normalizeLocation($loc) {
    return str_replace(['-','P'], '', $loc);
}

$location = normalizeLocation($location);

try {
    // Sprawdzenie czy rekord istnieje
    $stmt = $pdo->prepare("SELECT * FROM toners WHERE barcode=? AND model=? AND location=?");
    $stmt->execute([$barcode, $model, $location]);
    $row = $stmt->fetch();

    if ($row) {
        // Aktualizacja ilości
        $new_quantity = $row['quantity'] + $quantity;
        $update = $pdo->prepare("UPDATE toners SET quantity=?, updated_at=CURRENT_TIMESTAMP WHERE id=?");
        $update->execute([$new_quantity, $row['id']]);
        echo json_encode(["updated" => true, "new_quantity" => $new_quantity]);
        exit;
    }

    // Dodanie nowego rekordu
    $insert = $pdo->prepare("INSERT INTO toners (barcode, model, location, quantity) VALUES (?,?,?,?)");
    $insert->execute([$barcode, $model, $location, $quantity]);

    echo json_encode(["inserted" => true, "quantity" => $quantity]);

} catch (PDOException $e) {
    http_response_code(500);
    echo json_encode(['error' => 'Błąd bazy danych: '.$e->getMessage()]);
}

db.php

<?php
// db.php
$host = '127.0.0.1';
$db   = 'toner_manager';
$user = 'root';
$pass = ''; // Laragon domyślnie bez hasła
$charset = 'utf8mb4';

$dsn = "mysql:host=$host;dbname=$db;charset=$charset";
$options = [
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
];

try {
    $pdo = new PDO($dsn, $user, $pass, $options);
} catch (\PDOException $e) {
    http_response_code(500);
    echo json_encode(['error' => 'DB connection failed: '.$e->getMessage()]);
    exit;
}

get_toner.php

<?php
header('Content-Type: application/json');
header("Access-Control-Allow-Origin: *");

require_once 'db.php';

$barcode = $_GET['barcode'] ?? '';
if (!$barcode) {
    echo json_encode(['error'=>'Brak barcode w query']);
    exit;
}

try {
    $stmt = $pdo->prepare("SELECT * FROM toners WHERE barcode = ?");
    $stmt->execute([$barcode]);
    $rows = $stmt->fetchAll();

    if ($rows) {
        echo json_encode(['found'=>true,'toners'=>$rows]);
    } else {
        echo json_encode(['found'=>false,'toners'=>[]]);
    }

} catch (PDOException $e) {
    http_response_code(500);
    echo json_encode(['error' => 'Błąd bazy danych: '.$e->getMessage()]);
}

index.php

<?php
echo "Toner API działa. Użyj add_or_update.php, get_toner.php, list.php";

list.php

<?php
header("Content-Type: application/json");
header("Access-Control-Allow-Origin: *");

require_once "db.php";

try {
    $stmt = $pdo->query("SELECT * FROM toners ORDER BY location ASC");
    $toners = $stmt->fetchAll();

    echo json_encode($toners);

} catch (PDOException $e) {
    http_response_code(500);
    echo json_encode(['error' => 'Błąd bazy danych: '.$e->getMessage()]);
}

text.input.php

<?php
header("Content-Type: text/plain");

echo "php://input:\n";
var_dump(file_get_contents("php://input"));

echo "\n\n\$_POST:\n";
var_dump($_POST);

echo "\n\n\$_SERVER['CONTENT_TYPE']:\n";
var_dump($_SERVER['CONTENT_TYPE'] ?? null);

test.html

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Toner API</title>
</head>
<body>
<h1>Test Toner API</h1>

Barcode: <input id="barcode" value="1234567890123"><br>
Location: <input id="location" value="R1P2C"><br>
Model: <input id="model" value="HP-CE285A"><br>
<button onclick="sendToner()">Wyślij toner</button>
<button onclick="getToner()">Pobierz toner</button>
<button onclick="listToners()">Lista tonerów</button>

<pre id="output"></pre>

<script>
async function sendToner() {
    const data = {
        barcode: document.getElementById('barcode').value,
        location: document.getElementById('location').value,
        model: document.getElementById('model').value
    };
    const res = await fetch('add_or_update.php', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(data)
    });
    const json = await res.json();
    document.getElementById('output').textContent = JSON.stringify(json, null, 2);
}

async function getToner() {
    const barcode = document.getElementById('barcode').value;
    const res = await fetch('get_toner.php?barcode=' + encodeURIComponent(barcode));
    const json = await res.json();
    document.getElementById('output').textContent = JSON.stringify(json, null, 2);
}

async function listToners() {
    const res = await fetch('list.php');
    const json = await res.json();
    document.getElementById('output').textContent = JSON.stringify(json, null, 2);
}
</script>
</body>
</html>
